import { TactSourceVerifier } from "./tact-source-verifier";

const pkg =
  "eyJuYW1lIjoiRWNobyIsImNvZGUiOiJ0ZTZjY2dFQ0VBRUFBczBBQVJUL0FQU2tFL1M4OHNnTEFRSUJZZ0lEQXVyUUFkRFRBd0Z4c01BQmtYK1JjT0lCK2tBQklOZEpnUUVMdXZMZ2lDRFhDd29nZ3dtNklZRUUvN3F4OHVDSWd3bTY4dUNKVkZCVEEyOEUrR0VDK0dMdFJORFVBZmhqMGdBQmtqQnRqcFg0S05jTENvTUp1dkxnaVlFQkFkY0FBUUhSMnp6aVdkczhNRERJK0VNQnpIOEJ5Z0RKN1ZRTkJBSUJXQXNNQTE3dG91MzdjQ0hYU2NJZmxUQWcxd3NmM2dLU1czL2dBY0FBanhNZzEwbkNINDhMZ0NEWElkczgyengvMnpIZzNnVUlCZ0ZDeUhBQnl4OXZBQUZ2akcxdmpBSGJQRzhpQWNtVElXNnpsZ0Z2SWxuTXllZ3hEd0lLMnp6YlBIOEhDQUFLeUFIUEZza0JHbi80UW5CWUE0QkNBVzF0Mnp3SkFjN0ljUUhLQVZBSEFjb0FjQUhLQWxBRklOZEpnUUVMdXZMZ2lDRFhDd29nZ3dtNklZRUUvN3F4OHVDSWd3bTY4dUNKenhaUUEvb0NjQUhLYUNOdXN5VnVzN0dYTXpNQmNBSEtBT01OSVc2em5IOEJ5Z0FCSUc3eTBJQUJ6SlV4Y0FIS0FPTEpBZnNBQ2dDWWZ3SEtBTWh3QWNvQWNBSEtBQ1J1czUxL0Fjb0FCQ0J1OHRDQVVBVE1salFEY0FIS0FPSWtick9kZndIS0FBUWdidkxRZ0ZBRXpKWTBBM0FCeWdEaWNBSEtBQUovQWNvQUFzbFl6QUNWdTcwWUp3WE93OVhTeXVleDZFN0RuV1NvVWJab0p3bmRZMUxTdGtmTE1pMDY4dC9mRmlPWUp3SUZYQUc0Qm5ZNVRPV0RxdVJ5V3l3NEp3blpkT1dyTk95M002RHBadGxHYm9wSUFsVzROaTdVVFExQUg0WTlJQUFaSXdiWTZWK0NqWEN3cURDYnJ5NEltQkFRSFhBQUVCMGRzODRnSGJQSURRNEFCREJ0QWxReHlHOEFBVytNYlcrTWkzU0dWc2JHOHNJSTJ6d0Iyenh2SWdISmt5RnVzNVlCYnlKWnpNbm9NZEFQRHdDNklOZEtJZGRKbHlEQ0FDTENBTEdPU2dOdklvQi9Jczh4cXdLaEJhc0NVVlcyQ0NEQ0FKd2dxZ0lWMXhoUU04OFdRQlRlV1c4Q1UwR2h3Z0NaeUFGdkFsQkVvYW9DamhJeE04SUFtZFF3MENEWFNpSFhTWkp3SU9MaTZGOEQiLCJhYmkiOiJ7XCJuYW1lXCI6XCJFY2hvXCIsXCJ0eXBlc1wiOlt7XCJuYW1lXCI6XCJTdGF0ZUluaXRcIixcImhlYWRlclwiOm51bGwsXCJmaWVsZHNcIjpbe1wibmFtZVwiOlwiY29kZVwiLFwidHlwZVwiOntcImtpbmRcIjpcInNpbXBsZVwiLFwidHlwZVwiOlwiY2VsbFwiLFwib3B0aW9uYWxcIjpmYWxzZX19LHtcIm5hbWVcIjpcImRhdGFcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcImNlbGxcIixcIm9wdGlvbmFsXCI6ZmFsc2V9fV19LHtcIm5hbWVcIjpcIkNvbnRleHRcIixcImhlYWRlclwiOm51bGwsXCJmaWVsZHNcIjpbe1wibmFtZVwiOlwiYm91bmNlZFwiLFwidHlwZVwiOntcImtpbmRcIjpcInNpbXBsZVwiLFwidHlwZVwiOlwiYm9vbFwiLFwib3B0aW9uYWxcIjpmYWxzZX19LHtcIm5hbWVcIjpcInNlbmRlclwiLFwidHlwZVwiOntcImtpbmRcIjpcInNpbXBsZVwiLFwidHlwZVwiOlwiYWRkcmVzc1wiLFwib3B0aW9uYWxcIjpmYWxzZX19LHtcIm5hbWVcIjpcInZhbHVlXCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJpbnRcIixcIm9wdGlvbmFsXCI6ZmFsc2UsXCJmb3JtYXRcIjoyNTd9fSx7XCJuYW1lXCI6XCJyYXdcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcInNsaWNlXCIsXCJvcHRpb25hbFwiOmZhbHNlfX1dfSx7XCJuYW1lXCI6XCJTZW5kUGFyYW1ldGVyc1wiLFwiaGVhZGVyXCI6bnVsbCxcImZpZWxkc1wiOlt7XCJuYW1lXCI6XCJib3VuY2VcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcImJvb2xcIixcIm9wdGlvbmFsXCI6ZmFsc2V9fSx7XCJuYW1lXCI6XCJ0b1wiLFwidHlwZVwiOntcImtpbmRcIjpcInNpbXBsZVwiLFwidHlwZVwiOlwiYWRkcmVzc1wiLFwib3B0aW9uYWxcIjpmYWxzZX19LHtcIm5hbWVcIjpcInZhbHVlXCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJpbnRcIixcIm9wdGlvbmFsXCI6ZmFsc2UsXCJmb3JtYXRcIjoyNTd9fSx7XCJuYW1lXCI6XCJtb2RlXCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJpbnRcIixcIm9wdGlvbmFsXCI6ZmFsc2UsXCJmb3JtYXRcIjoyNTd9fSx7XCJuYW1lXCI6XCJib2R5XCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJjZWxsXCIsXCJvcHRpb25hbFwiOnRydWV9fSx7XCJuYW1lXCI6XCJjb2RlXCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJjZWxsXCIsXCJvcHRpb25hbFwiOnRydWV9fSx7XCJuYW1lXCI6XCJkYXRhXCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJjZWxsXCIsXCJvcHRpb25hbFwiOnRydWV9fV19XSxcInJlY2VpdmVyc1wiOlt7XCJyZWNlaXZlclwiOlwiaW50ZXJuYWxcIixcIm1lc3NhZ2VcIjp7XCJraW5kXCI6XCJ0ZXh0XCJ9fSx7XCJyZWNlaXZlclwiOlwiaW50ZXJuYWxcIixcIm1lc3NhZ2VcIjp7XCJraW5kXCI6XCJhbnlcIn19XSxcImdldHRlcnNcIjpbe1wibmFtZVwiOlwiaGVsbG9cIixcImFyZ3VtZW50c1wiOlt7XCJuYW1lXCI6XCJzcmNcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcInN0cmluZ1wiLFwib3B0aW9uYWxcIjpmYWxzZX19XSxcInJldHVyblR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcInN0cmluZ1wiLFwib3B0aW9uYWxcIjpmYWxzZX19XSxcImVycm9yc1wiOntcIjJcIjp7XCJtZXNzYWdlXCI6XCJTdGFjayB1bmRlZmxvd1wifSxcIjNcIjp7XCJtZXNzYWdlXCI6XCJTdGFjayBvdmVyZmxvd1wifSxcIjRcIjp7XCJtZXNzYWdlXCI6XCJJbnRlZ2VyIG92ZXJmbG93XCJ9LFwiNVwiOntcIm1lc3NhZ2VcIjpcIkludGVnZXIgb3V0IG9mIGV4cGVjdGVkIHJhbmdlXCJ9LFwiNlwiOntcIm1lc3NhZ2VcIjpcIkludmFsaWQgb3Bjb2RlXCJ9LFwiN1wiOntcIm1lc3NhZ2VcIjpcIlR5cGUgY2hlY2sgZXJyb3JcIn0sXCI4XCI6e1wibWVzc2FnZVwiOlwiQ2VsbCBvdmVyZmxvd1wifSxcIjlcIjp7XCJtZXNzYWdlXCI6XCJDZWxsIHVuZGVyZmxvd1wifSxcIjEwXCI6e1wibWVzc2FnZVwiOlwiRGljdGlvbmFyeSBlcnJvclwifSxcIjEzXCI6e1wibWVzc2FnZVwiOlwiT3V0IG9mIGdhcyBlcnJvclwifSxcIjMyXCI6e1wibWVzc2FnZVwiOlwiTWV0aG9kIElEIG5vdCBmb3VuZFwifSxcIjM0XCI6e1wibWVzc2FnZVwiOlwiQWN0aW9uIGlzIGludmFsaWQgb3Igbm90IHN1cHBvcnRlZFwifSxcIjM3XCI6e1wibWVzc2FnZVwiOlwiTm90IGVub3VnaCBUT05cIn0sXCIzOFwiOntcIm1lc3NhZ2VcIjpcIk5vdCBlbm91Z2ggZXh0cmEtY3VycmVuY2llc1wifSxcIjEyOFwiOntcIm1lc3NhZ2VcIjpcIk51bGwgcmVmZXJlbmNlIGV4Y2VwdGlvblwifSxcIjEyOVwiOntcIm1lc3NhZ2VcIjpcIkludmFsaWQgc2VyaWFsaXphdGlvbiBwcmVmaXhcIn0sXCIxMzBcIjp7XCJtZXNzYWdlXCI6XCJJbnZhbGlkIGluY29taW5nIG1lc3NhZ2VcIn0sXCIxMzFcIjp7XCJtZXNzYWdlXCI6XCJDb25zdHJhaW50cyBlcnJvclwifSxcIjEzMlwiOntcIm1lc3NhZ2VcIjpcIkFjY2VzcyBkZW5pZWRcIn0sXCIxMzNcIjp7XCJtZXNzYWdlXCI6XCJDb250cmFjdCBzdG9wcGVkXCJ9LFwiMTM0XCI6e1wibWVzc2FnZVwiOlwiSW52YWxpZCBhcmd1bWVudFwifSxcIjEzNVwiOntcIm1lc3NhZ2VcIjpcIkNvZGUgb2YgYSBjb250cmFjdCB3YXMgbm90IGZvdW5kXCJ9LFwiMTM2XCI6e1wibWVzc2FnZVwiOlwiSW52YWxpZCBhZGRyZXNzXCJ9LFwiMTM3XCI6e1wibWVzc2FnZVwiOlwiTWFzdGVyY2hhaW4gc3VwcG9ydCBpcyBub3QgZW5hYmxlZCBmb3IgdGhpcyBjb250cmFjdFwifX0sXCJpbnRlcmZhY2VzXCI6W1wib3JnLnRvbi5pbnRyb3NwZWN0aW9uLnYwXCIsXCJvcmcudG9uLmFiaS5pcGZzLnYwXCIsXCJvcmcudG9uLmRlcGxveS5sYXp5LnYwXCIsXCJvcmcudG9uLmNoYWluLndvcmtjaGFpbi52MFwiXX0iLCJpbml0Ijp7ImtpbmQiOiJkaXJlY3QiLCJhcmdzIjpbeyJuYW1lIjoiYSIsInR5cGUiOnsia2luZCI6InNpbXBsZSIsInR5cGUiOiJpbnQiLCJvcHRpb25hbCI6ZmFsc2UsImZvcm1hdCI6MjU3fX1dLCJwcmVmaXgiOnsiYml0cyI6MSwidmFsdWUiOjB9LCJkZXBsb3ltZW50Ijp7ImtpbmQiOiJzeXN0ZW0tY2VsbCIsInN5c3RlbSI6InRlNmNja0VDRWdFQUF0Y0FBUUhBQVFFRm9CNVJBZ0VVL3dEMHBCUDB2UExJQ3dNQ0FXSUlCQUlCV0FjRkFsVzROaTdVVFExQUg0WTlJQUFaSXdiWTZWK0NqWEN3cURDYnJ5NEltQkFRSFhBQUVCMGRzODRnSGJQSUVRWUNWREhJYndBQmI0eHRiNHlMZElaV3hzYnl3Z2piUEFIYlBHOGlBY21USVc2emxnRnZJbG5NeWVneDBCQVFBSlc3dlJnbkJjN0QxZExLNTdIb1RzT2RaS2hSdG1nbkNkMWpVdEsyUjhzeUxUcnkzOThXSTVnbkFnVmNBYmdHZGpsTTVZT3E1SEpiTERnbkNkbDA1YXMwN0xjem9PbG0yVVp1aWtnQzZ0QUIwTk1EQVhHd3dBR1JmNUZ3NGdINlFBRWcxMG1CQVF1Njh1Q0lJTmNMQ2lDRENib2hnUVQvdXJIeTRJaURDYnJ5NElsVVVGTURid1Q0WVFMNFl1MUUwTlFCK0dQU0FBR1NNRzJPbGZnbzF3c0tnd202OHVDSmdRRUIxd0FCQWRIYlBPSloyend3TU1qNFF3SE1md0hLQU1udFZCRUpBMTd0b3UzN2NDSFhTY0lmbFRBZzF3c2YzZ0tTVzMvZ0FjQUFqeE1nMTBuQ0g0OExnQ0RYSWRzODJ6eC8yekhnM2c4TUNnSUsyenpiUEg4TERBQUt5QUhQRnNrQkduLzRRbkJZQTRCQ0FXMXQyendOQWM3SWNRSEtBVkFIQWNvQWNBSEtBbEFGSU5kSmdRRUx1dkxnaUNEWEN3b2dnd202SVlFRS83cXg4dUNJZ3dtNjh1Q0p6eFpRQS9vQ2NBSEthQ051c3lWdXM3R1hNek1CY0FIS0FPTU5JVzZ6bkg4QnlnQUJJRzd5MElBQnpKVXhjQUhLQU9MSkFmc0FEZ0NZZndIS0FNaHdBY29BY0FIS0FDUnVzNTEvQWNvQUJDQnU4dENBVUFUTWxqUURjQUhLQU9Ja2JyT2Rmd0hLQUFRZ2J2TFFnRkFFekpZMEEzQUJ5Z0RpY0FIS0FBSi9BY29BQXNsWXpBRkN5SEFCeXg5dkFBRnZqRzF2akFIYlBHOGlBY21USVc2emxnRnZJbG5NeWVneEVBQzZJTmRLSWRkSmx5RENBQ0xDQUxHT1NnTnZJb0IvSXM4eHF3S2hCYXNDVVZXMkNDRENBSndncWdJVjF4aFFNODhXUUJUZVdXOENVMEdod2dDWnlBRnZBbEJFb2FvQ2poSXhNOElBbWRRdzBDRFhTaUhYU1pKd0lPTGk2RjhEQUFRd2JaQTRPMm89In19LCJzb3VyY2VzIjp7ImV4YW1wbGVzL2VjaG8udGFjdCI6IlkyOXVkSEpoWTNRZ1JXTm9ieUI3Q2dvZ0lDQWdhVzVwZENoaE9pQkpiblFwSUhzS0lDQWdJQ0FnSUNBS0lDQWdJSDBLSUNBZ0lBb2dJQ0FnY21WalpXbDJaU2h0YzJjNklGTjBjbWx1WnlrZ2V3b2dJQ0FnSUNBZ0lISmxjR3g1S0cxelp5NWhjME52YlcxbGJuUW9LU2s3Q2lBZ0lDQjlDaUFnSUNBS0lDQWdJSEpsWTJWcGRtVW9iWE5uT2lCVGJHbGpaU2tnZXdvZ0lDQWdJQ0FnSUhKbGNHeDVLRzF6Wnk1aGMwTmxiR3dvS1NrN0NpQWdJQ0I5Q2dvZ0lDQWdaMlYwSUdaMWJpQm9aV3hzYnloemNtTTZJRk4wY21sdVp5azZJRk4wY21sdVp5QjdDaUFnSUNBZ0lDQWdiR1YwSUdKMWFXeGtaWEk2SUZOMGNtbHVaMEoxYVd4a1pYSWdQU0JpWldkcGJsTjBjbWx1WnlncE93b2dJQ0FnSUNBZ0lHSjFhV3hrWlhJdVlYQndaVzVrS0NKSVpXeHNieXdnSWlrN0NpQWdJQ0FnSUNBZ1luVnBiR1JsY2k1aGNIQmxibVFvYzNKaktUc0tJQ0FnSUNBZ0lDQnlaWFIxY200Z1luVnBiR1JsY2k1MGIxTjBjbWx1WnlncE93b2dJQ0FnZlFwOSJ9LCJjb21waWxlciI6eyJuYW1lIjoidGFjdCIsInZlcnNpb24iOiIxLjAuMCIsInBhcmFtZXRlcnMiOiJ7XCJlbnRyeXBvaW50XCI6XCIuL2V4YW1wbGVzL2VjaG8udGFjdFwiLFwib3B0aW9uc1wiOnt9fSJ9fQ==";

const pkg141 =
  "eyJuYW1lIjoiVGVzdDE0MSIsImNvZGUiOiJ0ZTZjY2dFQ0VRRUFBaDRBQVJUL0FQU2tFL1M4OHNnTEFRSUJZZ0lEQXB6UUFkRFRBd0Z4c0tNQitrQUJJTmRKZ1FFTHV2TGdpQ0RYQ3dvZ2dRVC91dkxRaVlNSnV2TGdpRlJRVXdOdkJQaGhBdmhpMnp4YTJ6enk0SUxJK0VNQnpIOEJ5Z0JaQXNzZnl4L0o3VlFPQkFJQldBa0tBK0FCa2pCLzRIQWgxMG5DSDVVd0lOY0xIOTRnZ2hDTE5CZ2l1bzhnTU5NZkFZSVFpelFZSXJyeTRJSFRQOU1mV1d3U01hQ0krRUlCY0czYlBIL2dnaENVYXBpMnVvNm4weDhCZ2hDVWFwaTJ1dkxnZ2RNL0FUSElBWUlRci9rUFYxakxIOHMveWZoQ0FYQnQyengvNERCd0JRWUdBQmdBQUFBQVEyRnphR0poWTJzQk9tMXRJbTZ6bVZzZ2J2TFFnRzhpQVpFeTRoQWtjQU1FZ0VKUUk5czhCd0hLeUhFQnlnRlFCd0hLQUhBQnlnSlFCU0RYU1lFQkM3cnk0SWdnMXdzS0lJRUUvN3J5MEltRENicnk0SWpQRmxBRCtnSndBY3BvSTI2emtYK1RKRzZ6NHBjek13RndBY29BNHcwaGJyT2Nmd0hLQUFFZ2J2TFFnQUhNbFRGd0Fjb0E0c2tCK3dBSUFKaC9BY29BeUhBQnlnQndBY29BSkc2em5YOEJ5Z0FFSUc3eTBJQlFCTXlXTkFOd0Fjb0E0aVJ1czUxL0Fjb0FCQ0J1OHRDQVVBVE1salFEY0FIS0FPSndBY29BQW44QnlnQUN5VmpNQWdKekN3d0FFYmdyN3RSTkRTQUFHQUlRcWhqYlBOczhiQ0VPRFFJUXFaRGJQTnM4YkNFT0R3QUNJQUZRN1VUUTFBSDRZOUlBQVpmVEg5TWZXV3dTNFBnbzF3c0tnd202OHVDSmdRRUIxd0FCQWRIYlBCQUFBaUVBQW5BPSIsImFiaSI6IntcIm5hbWVcIjpcIlRlc3QxNDFcIixcInR5cGVzXCI6W3tcIm5hbWVcIjpcIlN0YXRlSW5pdFwiLFwiaGVhZGVyXCI6bnVsbCxcImZpZWxkc1wiOlt7XCJuYW1lXCI6XCJjb2RlXCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJjZWxsXCIsXCJvcHRpb25hbFwiOmZhbHNlfX0se1wibmFtZVwiOlwiZGF0YVwiLFwidHlwZVwiOntcImtpbmRcIjpcInNpbXBsZVwiLFwidHlwZVwiOlwiY2VsbFwiLFwib3B0aW9uYWxcIjpmYWxzZX19XX0se1wibmFtZVwiOlwiQ29udGV4dFwiLFwiaGVhZGVyXCI6bnVsbCxcImZpZWxkc1wiOlt7XCJuYW1lXCI6XCJib3VuY2VkXCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJib29sXCIsXCJvcHRpb25hbFwiOmZhbHNlfX0se1wibmFtZVwiOlwic2VuZGVyXCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJhZGRyZXNzXCIsXCJvcHRpb25hbFwiOmZhbHNlfX0se1wibmFtZVwiOlwidmFsdWVcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcImludFwiLFwib3B0aW9uYWxcIjpmYWxzZSxcImZvcm1hdFwiOjI1N319LHtcIm5hbWVcIjpcInJhd1wiLFwidHlwZVwiOntcImtpbmRcIjpcInNpbXBsZVwiLFwidHlwZVwiOlwic2xpY2VcIixcIm9wdGlvbmFsXCI6ZmFsc2V9fV19LHtcIm5hbWVcIjpcIlNlbmRQYXJhbWV0ZXJzXCIsXCJoZWFkZXJcIjpudWxsLFwiZmllbGRzXCI6W3tcIm5hbWVcIjpcImJvdW5jZVwiLFwidHlwZVwiOntcImtpbmRcIjpcInNpbXBsZVwiLFwidHlwZVwiOlwiYm9vbFwiLFwib3B0aW9uYWxcIjpmYWxzZX19LHtcIm5hbWVcIjpcInRvXCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJhZGRyZXNzXCIsXCJvcHRpb25hbFwiOmZhbHNlfX0se1wibmFtZVwiOlwidmFsdWVcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcImludFwiLFwib3B0aW9uYWxcIjpmYWxzZSxcImZvcm1hdFwiOjI1N319LHtcIm5hbWVcIjpcIm1vZGVcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcImludFwiLFwib3B0aW9uYWxcIjpmYWxzZSxcImZvcm1hdFwiOjI1N319LHtcIm5hbWVcIjpcImJvZHlcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcImNlbGxcIixcIm9wdGlvbmFsXCI6dHJ1ZX19LHtcIm5hbWVcIjpcImNvZGVcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcImNlbGxcIixcIm9wdGlvbmFsXCI6dHJ1ZX19LHtcIm5hbWVcIjpcImRhdGFcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcImNlbGxcIixcIm9wdGlvbmFsXCI6dHJ1ZX19XX0se1wibmFtZVwiOlwiRGVwbG95XCIsXCJoZWFkZXJcIjoyNDkwMDEzODc4LFwiZmllbGRzXCI6W3tcIm5hbWVcIjpcInF1ZXJ5SWRcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcInVpbnRcIixcIm9wdGlvbmFsXCI6ZmFsc2UsXCJmb3JtYXRcIjo2NH19XX0se1wibmFtZVwiOlwiRGVwbG95T2tcIixcImhlYWRlclwiOjI5NTIzMzUxOTEsXCJmaWVsZHNcIjpbe1wibmFtZVwiOlwicXVlcnlJZFwiLFwidHlwZVwiOntcImtpbmRcIjpcInNpbXBsZVwiLFwidHlwZVwiOlwidWludFwiLFwib3B0aW9uYWxcIjpmYWxzZSxcImZvcm1hdFwiOjY0fX1dfSx7XCJuYW1lXCI6XCJGYWN0b3J5RGVwbG95XCIsXCJoZWFkZXJcIjoxODI5NzYxMzM5LFwiZmllbGRzXCI6W3tcIm5hbWVcIjpcInF1ZXJ5SWRcIixcInR5cGVcIjp7XCJraW5kXCI6XCJzaW1wbGVcIixcInR5cGVcIjpcInVpbnRcIixcIm9wdGlvbmFsXCI6ZmFsc2UsXCJmb3JtYXRcIjo2NH19LHtcIm5hbWVcIjpcImNhc2hiYWNrXCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJhZGRyZXNzXCIsXCJvcHRpb25hbFwiOmZhbHNlfX1dfSx7XCJuYW1lXCI6XCJBZGRcIixcImhlYWRlclwiOjIzMzU0NDcwNzQsXCJmaWVsZHNcIjpbe1wibmFtZVwiOlwicXVlcnlJZFwiLFwidHlwZVwiOntcImtpbmRcIjpcInNpbXBsZVwiLFwidHlwZVwiOlwidWludFwiLFwib3B0aW9uYWxcIjpmYWxzZSxcImZvcm1hdFwiOjY0fX0se1wibmFtZVwiOlwiYW1vdW50XCIsXCJ0eXBlXCI6e1wia2luZFwiOlwic2ltcGxlXCIsXCJ0eXBlXCI6XCJ1aW50XCIsXCJvcHRpb25hbFwiOmZhbHNlLFwiZm9ybWF0XCI6MzJ9fV19XSxcInJlY2VpdmVyc1wiOlt7XCJyZWNlaXZlclwiOlwiaW50ZXJuYWxcIixcIm1lc3NhZ2VcIjp7XCJraW5kXCI6XCJ0eXBlZFwiLFwidHlwZVwiOlwiQWRkXCJ9fSx7XCJyZWNlaXZlclwiOlwiaW50ZXJuYWxcIixcIm1lc3NhZ2VcIjp7XCJraW5kXCI6XCJ0eXBlZFwiLFwidHlwZVwiOlwiRGVwbG95XCJ9fV0sXCJnZXR0ZXJzXCI6W3tcIm5hbWVcIjpcImNvdW50ZXJcIixcImFyZ3VtZW50c1wiOltdLFwicmV0dXJuVHlwZVwiOntcImtpbmRcIjpcInNpbXBsZVwiLFwidHlwZVwiOlwiaW50XCIsXCJvcHRpb25hbFwiOmZhbHNlLFwiZm9ybWF0XCI6MjU3fX0se1wibmFtZVwiOlwiaWRcIixcImFyZ3VtZW50c1wiOltdLFwicmV0dXJuVHlwZVwiOntcImtpbmRcIjpcInNpbXBsZVwiLFwidHlwZVwiOlwiaW50XCIsXCJvcHRpb25hbFwiOmZhbHNlLFwiZm9ybWF0XCI6MjU3fX1dLFwiZXJyb3JzXCI6e1wiMlwiOntcIm1lc3NhZ2VcIjpcIlN0YWNrIHVuZGVyZmxvd1wifSxcIjNcIjp7XCJtZXNzYWdlXCI6XCJTdGFjayBvdmVyZmxvd1wifSxcIjRcIjp7XCJtZXNzYWdlXCI6XCJJbnRlZ2VyIG92ZXJmbG93XCJ9LFwiNVwiOntcIm1lc3NhZ2VcIjpcIkludGVnZXIgb3V0IG9mIGV4cGVjdGVkIHJhbmdlXCJ9LFwiNlwiOntcIm1lc3NhZ2VcIjpcIkludmFsaWQgb3Bjb2RlXCJ9LFwiN1wiOntcIm1lc3NhZ2VcIjpcIlR5cGUgY2hlY2sgZXJyb3JcIn0sXCI4XCI6e1wibWVzc2FnZVwiOlwiQ2VsbCBvdmVyZmxvd1wifSxcIjlcIjp7XCJtZXNzYWdlXCI6XCJDZWxsIHVuZGVyZmxvd1wifSxcIjEwXCI6e1wibWVzc2FnZVwiOlwiRGljdGlvbmFyeSBlcnJvclwifSxcIjEzXCI6e1wibWVzc2FnZVwiOlwiT3V0IG9mIGdhcyBlcnJvclwifSxcIjMyXCI6e1wibWVzc2FnZVwiOlwiTWV0aG9kIElEIG5vdCBmb3VuZFwifSxcIjM0XCI6e1wibWVzc2FnZVwiOlwiQWN0aW9uIGlzIGludmFsaWQgb3Igbm90IHN1cHBvcnRlZFwifSxcIjM3XCI6e1wibWVzc2FnZVwiOlwiTm90IGVub3VnaCBUT05cIn0sXCIzOFwiOntcIm1lc3NhZ2VcIjpcIk5vdCBlbm91Z2ggZXh0cmEtY3VycmVuY2llc1wifSxcIjEyOFwiOntcIm1lc3NhZ2VcIjpcIk51bGwgcmVmZXJlbmNlIGV4Y2VwdGlvblwifSxcIjEyOVwiOntcIm1lc3NhZ2VcIjpcIkludmFsaWQgc2VyaWFsaXphdGlvbiBwcmVmaXhcIn0sXCIxMzBcIjp7XCJtZXNzYWdlXCI6XCJJbnZhbGlkIGluY29taW5nIG1lc3NhZ2VcIn0sXCIxMzFcIjp7XCJtZXNzYWdlXCI6XCJDb25zdHJhaW50cyBlcnJvclwifSxcIjEzMlwiOntcIm1lc3NhZ2VcIjpcIkFjY2VzcyBkZW5pZWRcIn0sXCIxMzNcIjp7XCJtZXNzYWdlXCI6XCJDb250cmFjdCBzdG9wcGVkXCJ9LFwiMTM0XCI6e1wibWVzc2FnZVwiOlwiSW52YWxpZCBhcmd1bWVudFwifSxcIjEzNVwiOntcIm1lc3NhZ2VcIjpcIkNvZGUgb2YgYSBjb250cmFjdCB3YXMgbm90IGZvdW5kXCJ9LFwiMTM2XCI6e1wibWVzc2FnZVwiOlwiSW52YWxpZCBhZGRyZXNzXCJ9LFwiMTM3XCI6e1wibWVzc2FnZVwiOlwiTWFzdGVyY2hhaW4gc3VwcG9ydCBpcyBub3QgZW5hYmxlZCBmb3IgdGhpcyBjb250cmFjdFwifX0sXCJpbnRlcmZhY2VzXCI6W1wib3JnLnRvbi5pbnRyb3NwZWN0aW9uLnYwXCIsXCJvcmcudG9uLmFiaS5pcGZzLnYwXCIsXCJvcmcudG9uLmRlcGxveS5sYXp5LnYwXCIsXCJvcmcudG9uLmRlYnVnLnYwXCIsXCJvcmcudG9uLmNoYWluLndvcmtjaGFpbi52MFwiXX0iLCJpbml0Ijp7ImtpbmQiOiJkaXJlY3QiLCJhcmdzIjpbeyJuYW1lIjoiaWQiLCJ0eXBlIjp7ImtpbmQiOiJzaW1wbGUiLCJ0eXBlIjoiaW50Iiwib3B0aW9uYWwiOmZhbHNlLCJmb3JtYXQiOjI1N319XSwicHJlZml4Ijp7ImJpdHMiOjEsInZhbHVlIjowfSwiZGVwbG95bWVudCI6eyJraW5kIjoic3lzdGVtLWNlbGwiLCJzeXN0ZW0iOiJ0ZTZjY2tFQ0V3RUFBaWdBQVFIQUFRRUZvS0pkQWdFVS93RDBwQlAwdlBMSUN3TUNBV0lFQ2dLYzBBSFEwd01CY2JDakFmcEFBU0RYU1lFQkM3cnk0SWdnMXdzS0lJRUUvN3J5MEltRENicnk0SWhVVUZNRGJ3VDRZUUw0WXRzOFd0czg4dUNDeVBoREFjeC9BY29BV1FMTEg4c2Z5ZTFVRHdVRDRBR1NNSC9nY0NIWFNjSWZsVEFnMXdzZjNpQ0NFSXMwR0NLNmp5QXcweDhCZ2hDTE5CZ2l1dkxnZ2RNLzB4OVpiQkl4b0lqNFFnRndiZHM4ZitDQ0VKUnFtTGE2anFmVEh3R0NFSlJxbUxhNjh1Q0IwejhCTWNnQmdoQ3YrUTlYV01zZnl6L0orRUlCY0czYlBIL2dNSEFHQndjQUdBQUFBQUJEWVhOb1ltRmphd0U2YlcwaWJyT1pXeUJ1OHRDQWJ5SUJrVExpRUNSd0F3U0FRbEFqMnp3SUFjckljUUhLQVZBSEFjb0FjQUhLQWxBRklOZEpnUUVMdXZMZ2lDRFhDd29nZ1FUL3V2TFFpWU1KdXZMZ2lNOFdVQVA2QW5BQnltZ2pick9SZjVNa2JyUGlsek16QVhBQnlnRGpEU0Z1czV4L0Fjb0FBU0J1OHRDQUFjeVZNWEFCeWdEaXlRSDdBQWtBbUg4QnlnREljQUhLQUhBQnlnQWtick9kZndIS0FBUWdidkxRZ0ZBRXpKWTBBM0FCeWdEaUpHNnpuWDhCeWdBRUlHN3kwSUJRQk15V05BTndBY29BNG5BQnlnQUNmd0hLQUFMSldNd0NBVmdMRWdJQ2N3d09BaENxR05zODJ6eHNJUThOQUFJZ0FoQ3BrTnM4Mnp4c0lROFJBVkR0Uk5EVUFmaGowZ0FCbDlNZjB4OVpiQkxnK0NqWEN3cURDYnJ5NEltQkFRSFhBQUVCMGRzOEVBQUNjQUFDSVFBUnVDdnUxRTBOSUFBWTVPZFdtUT09In19LCJzb3VyY2VzIjp7ImNvbnRyYWN0cy90ZXN0MTQxLnRhY3QiOiJhVzF3YjNKMElDSkFjM1JrYkdsaUwyUmxjR3h2ZVNJN0NncHRaWE56WVdkbElFRmtaQ0I3Q2lBZ0lDQnhkV1Z5ZVVsa09pQkpiblFnWVhNZ2RXbHVkRFkwT3dvZ0lDQWdZVzF2ZFc1ME9pQkpiblFnWVhNZ2RXbHVkRE15T3dwOUNncGpiMjUwY21GamRDQlVaWE4wTVRReElIZHBkR2dnUkdWd2JHOTVZV0pzWlNCN0NpQWdJQ0JwWkRvZ1NXNTBJR0Z6SUhWcGJuUXpNanNLSUNBZ0lHTnZkVzUwWlhJNklFbHVkQ0JoY3lCMWFXNTBNekk3Q2dvZ0lDQWdhVzVwZENocFpEb2dTVzUwS1NCN0NpQWdJQ0FnSUNBZ2MyVnNaaTVwWkNBOUlHbGtPd29nSUNBZ0lDQWdJSE5sYkdZdVkyOTFiblJsY2lBOUlEQTdDaUFnSUNCOUNnb2dJQ0FnY21WalpXbDJaU2h0YzJjNklFRmtaQ2tnZXdvZ0lDQWdJQ0FnSUhObGJHWXVZMjkxYm5SbGNpQXJQU0J0YzJjdVlXMXZkVzUwT3dvS0lDQWdJQ0FnSUNBdkx5Qk9iM1JwWm5rZ2RHaGxJR05oYkd4bGNpQjBhR0YwSUhSb1pTQnlaV05sYVhabGNpQjNZWE1nWlhobFkzVjBaV1FnWVc1a0lHWnZjbmRoY21RZ2NtVnRZV2x1YVc1bklIWmhiSFZsSUdKaFkyc0tJQ0FnSUNBZ0lDQnpaV3htTG01dmRHbG1lU2dpUTJGemFHSmhZMnNpTG1GelEyOXRiV1Z1ZENncEtUc0tJQ0FnSUgwS0NpQWdJQ0JuWlhRZ1puVnVJR052ZFc1MFpYSW9LVG9nU1c1MElIc0tJQ0FnSUNBZ0lDQnlaWFIxY200Z2MyVnNaaTVqYjNWdWRHVnlPd29nSUNBZ2ZRb0tJQ0FnSUdkbGRDQm1kVzRnYVdRb0tUb2dTVzUwSUhzS0lDQWdJQ0FnSUNCeVpYUjFjbTRnYzJWc1ppNXBaRHNLSUNBZ0lIMEtmUW89In0sImNvbXBpbGVyIjp7Im5hbWUiOiJ0YWN0IiwidmVyc2lvbiI6IjEuNC4xIiwicGFyYW1ldGVycyI6IntcImVudHJ5cG9pbnRcIjpcImNvbnRyYWN0cy90ZXN0MTQxLnRhY3RcIixcIm9wdGlvbnNcIjp7XCJkZWJ1Z1wiOnRydWV9fSJ9fQ==";

describe("TactSourceVerifier", () => {
  it("compiles", async function () {
    const tactVerifier = new TactSourceVerifier({
      writeFile: async (_path, content) => {},
      readFile: async (path) => {
        if (path === "echo.pkg") return Buffer.from(pkg, "base64");
        throw new Error("Unknown path");
      },
      readdir: async () => [],
    });

    const res = await tactVerifier.verify({
      compiler: "tact",
      compilerSettings: { tactVersion: "1.0.0" },
      knownContractAddress: "",
      knownContractHash: "XhyDRMeBeZs7IK/pJ0XFWNjeKTx2g6n0+hGQ/9Ne2SA=",
      senderAddress: "",
      sources: [
        {
          path: "echo.pkg",
        },
      ],
      tmpDir: "",
    });

    console.log(res.error);

    expect(res.result).toEqual("similar");
  });

  it("compiles141", async function () {
    const tactVerifier = new TactSourceVerifier({
      writeFile: async (_path, content) => {},
      readFile: async (path) => {
        if (path === "echo.pkg") return Buffer.from(pkg141, "base64");
        throw new Error("Unknown path");
      },
      readdir: async () => [],
    });

    const res = await tactVerifier.verify({
      compiler: "tact",
      compilerSettings: { tactVersion: "1.4.1" },
      knownContractAddress: "",
      knownContractHash: "XhyDRMeBeZs7IK/pJ0XFWNjeKTx2g6n0+hGQ/9Ne2SA=",
      senderAddress: "",
      sources: [
        {
          path: "echo.pkg",
        },
      ],
      tmpDir: "",
    });

    console.log(res.error);

    expect(res.result).toEqual("not_similar");
  });

  it("invalid file format", async function () {
    const tactVerifier = new TactSourceVerifier({
      writeFile: async (_path, content) => {},
      readFile: async (path) => {
        if (path === "echo.pkg") return Buffer.from("{{");
        throw new Error("Unknown path");
      },
      readdir: async () => [],
    });

    const res = await tactVerifier.verify({
      compiler: "tact",
      compilerSettings: { tactVersion: "1.0.0-rc8" },
      knownContractAddress: "",
      knownContractHash: "htGkXV77gc/Tx5Z55tyTyZT8aSpmpnpkFPZpe4lPMIQ=",
      senderAddress: "",
      sources: [
        {
          path: "echo.pkg",
        },
      ],
      tmpDir: "",
    });

    expect(res.result).toEqual("unknown_error");
  });
});
